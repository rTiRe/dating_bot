syntax = "proto3";

package dating.service.profiles;


service ProfilesService {
    rpc Create(ProfileCreateRequest) returns (ProfileCreateResponse);
    rpc Get(ProfilesGetRequest) returns (ProfilesGetResponse);
    rpc Update(ProfileUpdateRequest) returns (ProfilesUpdateResponse);
    rpc Delete(ProfileDeleteRequest) returns (ProfilesDeleteResponse);
}


message ProfileCreateRequest {
    reserved 8, 9;
    string account_id = 1;
    string name = 2;
    int32 age = 3;
    Gender gender = 4;
    optional string biography = 5;
    string language_locale = 6;
    repeated string image_base64_list = 7;
    Gender interested_in = 10;
    oneof coordinates {
        CityPoint city_point = 11;
        UserPoint user_point = 12;
    }
}


message ProfilesGetRequest {
    oneof identifier {
        string id = 1;
        string account_id = 2;
    }
}


message ProfileUpdateRequest {
    message UpdateData {
        reserved 8, 9;
        optional string account_id = 1;
        optional string name = 2;
        optional int32 age = 3;
        optional Gender gender = 4;
        optional string biography = 5;
        optional string language_locale = 6;
        repeated string image_base64_list = 7;
        optional Gender interested_in = 10;
        oneof coordinates {
            CityPoint city_point = 11;
            UserPoint user_point = 12;
        }
    }
    string id = 1;
    UpdateData data = 2;
}


message ProfileDeleteRequest {
    string id = 1;
}


message ProfileCreateResponse {
    reserved 11, 12;
    string id = 1;
    string account_id = 2;
    string name = 3;
    int32 age = 4;
    Gender gender = 5;
    string biography = 6;
    string language_locale = 7;
    string created_at = 8;
    string updated_at = 9;
    repeated string image_base64_list = 10;
    int32 rating = 13;
    Gender interested_in = 14;
    oneof coordinates {
        CityPoint city_point = 15;
        UserPoint user_point = 16;
    }
}


message ProfilesGetResponse {
    reserved 11, 12;
    string id = 1;
    string account_id = 2;
    string name = 3;
    int32 age = 4;
    Gender gender = 5;
    string biography = 6;
    string language_locale = 7;
    string created_at = 8;
    string updated_at = 9;
    repeated string image_base64_list = 10;
    int32 rating = 13;
    Gender interested_in = 14;
    oneof coordinates {
        CityPoint city_point = 15;
        UserPoint user_point = 16;
    }
}


message ProfilesUpdateResponse {
    string result = 1;
}


message ProfilesDeleteResponse {
    string result = 1;
}


message CityPoint {
    string name = 1;
    float lat = 2;
    float lon = 3;
}


message UserPoint {
    float lat = 1;
    float lon = 2;
}


enum Gender {
    GENDER_DEFAULT = 0;
    GENDER_MALE = 1;
    GENDER_FEMALE = 2;
}
